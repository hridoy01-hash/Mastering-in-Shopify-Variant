<div class="container">
  <div class="row product_content_wrapper my-5">
    <div class="row gx-4 gx-lg-5 align-items-center">
      <div class="col-md-6">
        <div class="images p-3">
          <div class="text-center p-4">
            <img id="main_img" src="{{ product.featured_image | img_url:'original' }}" width="550px">
          </div>
          <div class="thumbnail_img text-center">
            {% if product.images.size > 0 %}
              {% for image in product.images %}
                <img
                  onclick="change_img(this)"
                  id="main_img"
                  src="{{ image.src | img_url:'original' }}"
                  width="100px"
                >
              {% endfor %}
            {% endif %}
          </div>
        </div>
      </div>
      <div class="col-md-6">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'title' %}
              <h1 class="display-5 fw-bolder product_name">{{ product.title }}</h1>
            {% when 'vendor' %}
              <div class="small mb-1 product_vendor">{{ product.vendor }}</div>
            {% when 'price' %}
              <div class="fs-5 mb-5 product_price">
                {% render 'price-show', product: product %}
              </div>
            {% when 'description' %}
              <div class="product_description">
                <p class="lead">
                  {{ product.content }}
                </p>
              </div>
            {% when 'variant' %}
              <select class="form-control mt-3 d-none">
                {% for variant in product.variants %}
                  <option>{{ variant.title | escape }}</option>
                {% endfor %}
              </select>

              {% unless product.has_only_default_variant %}
                <div class="product_variaitons">
                  {% for option in product.options_with_values %}
                    {% liquid
                      assign variants_available_arr = product.variants | map: 'available'
                      assign variants_option1_arr = product.variants | map: 'option1'
                      assign variants_option2_arr = product.variants | map: 'option2'
                      assign variants_option3_arr = product.variants | map: 'option3'
                    %}
                    <div class="sizes mt-3">
                      <h5 class="variaiton_title">{{ option.name }}</h5>
                      {% for value in option.values %}
                        {% liquid
                          assign option_disabled = true

                          for option1_name in variants_option1_arr
                            case option.position
                              when 1
                                if variants_option1_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
                                  assign option_disabled = false
                                endif
                              when 2
                                if option1_name == product.selected_or_first_available_variant.option1 and variants_option2_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
                                  assign option_disabled = false
                                endif
                              when 3
                                if option1_name == product.selected_or_first_available_variant.option1 and variants_option2_arr[forloop.index0] == product.selected_or_first_available_variant.option2 and variants_option3_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
                                  assign option_disabled = false
                                endif
                            endcase
                          endfor
                        %}
                        <label class="radio">
                          <input
                            type="radio"
                            name="{{ option.name | downcase }}"
                            value="{{ value | escape }}"
                            {% if option.selected_value == value %}
                              checked
                            {% endif %}
                            {% if option_disabled %}
                              disabled
                            {% endif %}
                          >
                          <span
                            {% if option_disabled %}
                              title="Stock Out"
                            {% endif %}
                          >
                            {{- value | escape -}}
                          </span>
                        </label>
                      {% endfor %}
                    </div>
                  {% endfor %}
                </div>
              {% endunless %}
            {% when 'quantity' %}
              <div class="quantity_slector my-15 ">
                <label>Quantity:</label>
                <input type="number" class="form-control" name="quantity" value="1" min="1">
              </div>
            {% when 'AddToCart' %}
              <div class="d-flex addToCartButton mt-3">
                <button class="btn btn-outline-dark w-50 flex-shrink-0" type="button">
                  <i class="bi-cart-fill me-1"></i>
                  Add to cart
                </button>
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
<script>
  function change_img(image){
    let main_img = document.getElementById("main_img");
    main_img.src = image.src;
  }
</script>
{% schema %}
{
  "name":"Product Template",
  "settings":[],
  "blocks":[
    {
      "type":"title",
      "name":"Title",
      "limit":1
    },
    {
      "type":"vendor",
      "name":"Vendor",
      "limit":1
    },
    {
      "type":"price",
      "name":"Price",
      "limit":1
    },
    {
      "type":"description",
      "name":"Description",
      "limit":1
    },
    {
      "type":"quantity",
      "name":"Quantity Selector",
      "limit":1
    },
    {
      "type":"variant",
      "name":"Variations Picker",
      "limit":1
    },
    {
      "type":"AddToCart",
      "name":"addToCartButton",
      "limit":1
    }
  ],
  "default":{
    "blocks":[
      {
        "type":"title"
      },
      {
        "type":"vendor"
      },
      {
        "type":"description"
      },
      {
        "type":"price"
      },
      {
        "type":"quantity"
      },
      {
        "type":"variant"
      },
      {
       "type":"AddToCart"
      }
    ]
  }
}
{% endschema %}
